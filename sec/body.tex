% !TeX root = ../thesis.tex

\subsection{Conventions}

We write $(\Ch, \ot, \Z)$ for the symmetric monoidal category of chain complexes of free $\Z$-modules, $\Sym_2$ for the group with only one non-identity element $T$, and $X$ for an unspecified simplicial complex.
In this work, the vertices of a simplicial complex are equipped with a partial order compatibly restricting to a total order on each simplex.
We denote the usual integral chains of $X$ by $\chains(X)$.

\subsection{Presheaves} \label{ss:presheaves}

Regard $X$ as a poset category with a morphism $x \to y$ whenever $x$ is a subsimplex of $y$.
The category of \textit{presheaves} on $X$ is the category of functors $\Fun(X^\op, \Ch)$.
Given a presheaf $\cN$, we will denote the chain complex it associates to a simplex $x$ by $\cN_x$ and the linear map associated to a morphism $x \to y$ by $\cN_{x \to y}$.
We remark that this category is enriched over $\Ch$.
These presheaves were termed ``local systems'' in \cite{ranicki1990assembly} where $X$ was allowed to be a semi-simplicial set.
We do not use this terminology since the associated topological sheaf --which we describe next-- needs not be locally constant.

\subsection{Remark on topological sheaves} \label{ss:topological sheaf}

The set of simplices of $X$ can be endowed with a topology making presheaves as defined above into topological sheaves.
Explicitly, this topology $\tau$ on the set of simplices of $X$ is generated by subsets $\bar y = \set{x \in X : x \to y}$.
Notice that as poset categories $X$ and the category of open sets in $\tau$ are isomorphic.
Therefore, so are their categories of contravariant functors to $\Ch$.
Furthermore, it can be verified that these topological presheaves are indeed sheaves.

\subsection{Symmetric coalgebras}

We now introduce a derived notion of $\Sym_2$-symmetric coalgebras.
We avoid the term cocommutative since we do not consider higher arity compositions.
Let $W$ be the minimal free resolution of $\Z$ by free $\Z[\Sym_2]$-modules
\[
\Z[\Sym_2]\set{e_0} \xla{1-T} \Z[\Sym_2]\set{e_1} \xla{1+T} \Z[\Sym_2]\set{e_2} \xla{1-T} \dotsb
\]
A \textit{symmetric coalgebra} is a chain complex $C$ with an $\Sym_2$-equivariant chain map
\[
W \ot C \to C \ot C
\]
where the action of $\Sym_2$ in the domain is induced from that in $W$ and in the target is given by transposition.
We will write $\Delta_i$ for $\Delta(e_i \ot -)$, noticing that
\[
\partial(\Delta_i) = \big( 1+(-1)^i T \big) \Delta_{i-1}
\]
with the convention $\Delta_{-1} = 0$.
The examples we will encounter are equipped with an augmentation $\varepsilon \colon C \to \Z$ making $(C, \Delta_0, \varepsilon)$ into a comonoid in $\Ch$.

\subsection{Remark on higher categories}
\label{ss:higher categories}

A strict infinity category is the limiting concept obtained from the recursive definition of an $n$-category as a category enriched in $(n-1)$-categories.
Building on ideas from \cite{brown1981cubes, kapranov1991polycategory, steiner2004omega}, in \cite{medina2020globular} a functor from a full subcategory of symmetric coalgebras to strict infinity categories was constructed and shown to be an equivalence onto a full subcategory recently characterized intrinsically in \cite{ozornova2022steiner}.
Additionally, this functor applied to the symmetric coalgebras of standard simplices defined by Steenrod and recalled in \cref{ss:cup-i} defines the nerve of infinity categories \cite{street1987orientals}.

%\subsection{Simplicial chains}

%Explicitly,
%\[
%\chains(X)_m = \Z\set[\big]{x \in X : \bars{x} = m},
%\qquad \partial(x) = \textstyle\sum (-1)^u \face_u(x)
%\]
%where $\face_u(x)$ is the simplex obtained from $x$ by removing its vertex in position $u$.


\subsection{Alexander--Whitney} \label{ss:aw}

The \textit{Alexander--Whitney coproduct}
\[
\Delta_0 \colon \chains(X) \to \chains(X) \ot \chains(X)
\]
is defined on a basis element $[v_0, \dots, v_n]$ by
\begin{equation*} \label{e:alexander-whitney coalgebra}
	\Delta_0 \big( [v_0, \dots, v_n] \big) =
	\sum_{k=0}^n \ [v_0, \dots, v_k] \ot [v_k, \dots, v_n].
\end{equation*}
%and \textit{augmentation map}
%\[
%\aug \colon \chains(X) \to \Z
%\]
%is defined on a basis element $x \in \chains(X)_n$ by
%\begin{equation*} \label{e:alexander-whitney coalgebra}
%	\Delta_0(x) = \sum_{u=0}^n \ \face_{u+1} \dotsm \face_{n}(x) \ot \face_{0} \dotsm \face_{u-1}(x).
%\end{equation*}
%\begin{equation*} \label{e:augmentation map}
%	\aug(x) =
%	\begin{cases}
%		1 & n = 0, \\
%		0 & n > 0.
%	\end{cases}
%\end{equation*}
%It satisfies
%\begin{gather}
%	\label{e:coassociativity relation}
%	(\Delta_0 \ot \, \id) \circ \Delta_0 = (\id \ot \Delta_0) \circ \Delta_0.
%	\label{e:counital relation}
%	(\aug \ot \, \id) \circ \Delta_0 = \id = (\id \ot \aug) \circ \Delta_0.
%\end{gather}
%making the (normalized) chains $\chains(X)$ of any simplicial set $X$ into a natural coassociative counital coalgebra, referred to as the \textit{Alexander--Whitney coalgebra} of $X$.
%We will use the following recursively defined notation:
%\begin{align*}
%	\Delta_0^1 &= \Delta_0, \\
%	\Delta_0^k &= (\Delta_0 \ot \, \id) \circ \Delta_0^{k-1},
%\end{align*}
%remarking that
%\[
%(\Delta_0 \ot \, \id) \circ \Delta_0^k = (\id \ot \Delta_0) \circ \Delta_0^k.
%\]

\subsection{Join}

The \textit{join product}
\[
\ast \colon \chains(X) \ot \chains(X) \to \chains(X)
\]
is the natural degree~$1$ linear map defined on a basis element
\[
[v_0, \dots, v_p] \ot [v_{p+1}, \dots, v_q]
\]
to be $0$ if $\set{v_\ell : \ell = 0, \dots, q}$ is not the set of vertices of a simplex in $X$ or if $v_i = v_j$ for some $i \neq j$,
otherwise
\[
\ast \big(\left[v_0, \dots, v_p \right] \ot \left[v_{p+1}, \dots, v_q\right]\big) =
(-1)^{p} \sign(\pi) \left[v_{\pi(0)}, \dots, v_{\pi(q)}\right]
\]
where $\pi$ is the permutation that orders the vertices.
%It is an algebraic version of the usual join of faces in a simplex, please consult \cref{f:join of faces} for an example.

%\begin{figure}
%	\input{aux/join}
%	\caption{Geometric representation of the join product of two basis elements. It depicts the identity $\pr \big( [0] \otimes [1,2] \big) = [0,1,2]$.}
%	\label{f:join of faces}
%\end{figure}

\subsection{Steenrod construction} \label{ss:cup-i}

We will now describe Steenrod's construction of cup-$i$ coproducts \cite[p.293]{steenrod1947products} making $\chains(X)$ into a symmetric coalgebra.
Let
\[
\Delta \colon W \ot \chains(X) \to \chains(X) \ot \chains(X)
\]
be the $\Sym_2$-equivariant chain map determined by the linear maps $\Delta_i = \Delta(e_i \ot -)$ recursively defined for $i > 1$ by
\begin{equation*} \label{e:cup-i coproducts}
	\copr_i =
	(\ast \ot \id) \circ (\id \ot T\copr_{i-1}) \circ \copr_0.
\end{equation*}

We refer to \cite{real1996computability, gonzalez-diaz1999steenrod, mcclure2003multivariable, medina2021fast_sq} for alternative descriptions of cup-$i$ coproducts, all shown to be equivalent to Steenrod's original via an axiomatic characterization \cite{medina2022axiomatic}.
These axiomatized cup-$i$ coproducts seem to be combinatorially fundamental, being constructed from the convex geometry of the standard simplex $\gsimplex^n$ in $\R^n$ given a generic orthonormal basis \cite{medina2022fib_poly}.

\subsection{Special cases}

We will use the following special values of the Steenrod cup-$i$ coalgebra.
For a basis element $x$ of $\chains(X)_n$ and $i > n$ we have:
\begin{align}
	&\Delta_i(x) = 0, \\
	&\Delta_n(x) = \pm \, x \ot x, \\
	&\Delta_{n-1}(x) =
	\sum_{u \text{ even}} \pm \face_u(x) \ot x \ +
	\sum_{u \text{ odd}} \pm \, x \ot \face_u(x),
\end{align}
where $\pm$ stands for an unspecified sign and $\face_u [v_0,\dots,v_n] = [v_0,\dots,\widehat{v}_u,\dots,v_n]$.

\subsection{Remark on Steenrod squares} \label{ss:steenrod squares}

We mention that Steenrod's introduction of the cup-$i$ coproducts $\Delta_i$ was motivated by the desire to construct finer invariants on the cohomology of spaces with mod 2 coefficients.
These are the celebrated \textit{Steenrod squares}
\[
Sq^k \colon H^\bullet(X; \Ftwo) \to H^\bullet(X; \Ftwo)
\]
defined on a class $[\alpha]$ of cohomological degree $n$ represented by a cocycle $\alpha$ by
\[
Sq^k [\alpha] = \big[ (\alpha \ot \alpha) \Delta_{n-k}(-) \big].
\]

\subsection{Remark on $E_\infty$-structures}

Although we do not use the following fact in this work, we mention that the cup-$i$ coproducts of Steenrod are part of much larger structure derived from the diagonal of spaces; that of an $E_\infty$-coalgebra structure.
Explicitly, this structure is given by all maps $\chains(X) \to \chains(X)^{\ot r}$ for any $r > 0$ obtained from compositions of the Alexander--Whitney coproduct and the join product.
The underlying model for the $E_\infty$-operad use in this statement is presented in \cite{medina2020prop1, medina2021prop2}.
We mention that this $E_\infty$-coalgebra structure on simplicial chains is compatible with the $E_\infty$-coalgebras of McClure--Smith \cite{mcclure2003multivariable} and Berger--Fresse \cite{berger2004combinatorial}.
We also mention that analogues of the cup-$i$ coproducts for odd prime values of $r$ were defined in \cite{medina2021may_st} and implemented in \cite{medina2021comch}.

\subsection{Comodules}

A \textit{comodule} over a symmetric coalgebra $(C, \Delta)$ is a chain complex $M$ together with a chain map
\[
\nabla \colon W \ot N \to N \ot C.
\]
The examples of comodules that we will construct make the following diagram commute up to homotopy
\[
\begin{tikzcd}
	W \ot W \ot N \arrow[r, "\id \ot \nabla"] \arrow[d, "\id \ot \nabla"'] &
	W \ot N \ot C \arrow[d, "(\id \ot \Delta)(T \ot \id)"] \\
	W \ot N \ot C \arrow[r, "\nabla \ot \id"] &
	N \ot C \ot C,
\end{tikzcd}
\]
but this additional property is not needed for our theorem.
We will denote by $\coMod_C^{\Sym_2}$ the category of such comodules with strict morphisms, i.e. linear maps $f \colon N \to N'$ making the following diagram
\[
\begin{tikzcd}
	W \ot N \arrow[d, "\nabla"'] \arrow[r, "\id\, \ot f"] &
	W \ot N' \arrow[d, "\nabla"] & \\
	N \ot C \arrow[r, "f \ot\, \id"] &
	N' \ot C
\end{tikzcd}
\]
commute.
We remark that this category is enriched in $\Ch$.
We will write $\nabla_i$ for $\nabla(e_i \ot -)$ and $\nabla_i^T$ for $\nabla(Te_i \ot -)$.

\subsection{Closure cosheaf}

For any simplex $x$ in $X$ denote by $\bar x$ the subcomplex of $X$ containing the subsimplices of $x$.
The \textit{closure cosheaf} is the (covariant) functor from the poset category of $X$ to $\Ch$ defined on objects by $x \mapsto \chains(\bar x)$ and on morphisms by canonical inclusions $\chains_{x \to y} \colon \chains(\bar x) \to \chains(\bar y)$.

For any simplex $y$ in $X$ and subsimplex $x$, we will find it convenient to identify the basis element $x$ in $\chains(\bar y)$ with the unique morphism $(x \to y)$, in particular $\chains_{y \to z} (x \to y) = (x \to z)$.
%, but we continue writing $y$ instead of $(y \to y)$.
%In particular, the canonical inclusion associated to $y \to z$ is given by
%\begin{align*}
%	\chains(\bar y) &\to \chains(\bar z) \\
%	(x \to y) &\mapsto (x \to z).
%\end{align*}

\subsection{Assembly} \label{ss:assembly}

The \textit{assembly functor}
\[
\assembly \colon \Fun(X^\op, \Ch) \to \Ch
\]
is given by tensoring over $X$ with the closure cosheaf.
Explicitly, let $\cN$ be a sheaf over $X$, then
\[
\assembly \cN = \bigoplus_{x \in X} \chains(\bar x) \ot \cN_x \ / \sim
\]
where for simplices $x \to y \to z$ and $c \in \cN[z]$ we have
\[
(x \to z) \ot c \ \sim \, (x \to y) \ot \cN_{y \to z}(c)
\]
and for a morphism $F \colon \cN \to \cN'$ of presheaves over $X$ we have
\[
\assembly F[(x \to y) \ot c] = [(x \to y) \ot F_y(c)].
\]
We remark that this is a functor of categories enriched in $\Ch$.

This definition agrees with Andrew's and M. Weiss's \cite[Definition 1.4]{ranicki1990assembly} if $X$ is simply-connected.

\subsection{Lift to comodules}

We will describe a factorization of the assembly functor
\[
\assembly \colon \Fun(X^\op, \Ch) \to \coMod^{\Sym_2}_{\chains(X)} \to \Ch
\]
where the second arrow is the forgetful functor.

Let $\cN$ be a presheaf over $X$ and let
\[
\nabla \colon W \ot \assembly \cN \to \chains(X) \ot \assembly \cN
\]
be the linear map defined for simplices $x \to y$ and $c \in \cN_y$ by
\[
\nabla_i \big( [(x \to y) \ot c] \big) =
\sum_{\lambda \in \Lambda} {[(x_\lambda^{(1)} \to y) \ot c]} \ot \alpha_\lambda \, x_\lambda^{(2)}
\]
and
\[
\nabla_i^T \big( [(x \to y) \ot c] \big) =
\sum_{\lambda \in \Lambda} {[(x_\lambda^{(2)} \to y) \ot c]} \ot \beta_\lambda \, x_\lambda^{(1)}
\]
where
\[
\Delta_i(x) = \sum_{\lambda \in \Lambda} \alpha_\lambda \ x_\lambda^{(1)} \ot x_\lambda^{(2)}
\]
and
$\beta_\lambda = \pm \alpha_\lambda$ with the sign of the transposition of $x_\lambda^{(1)}$ and $x_\lambda^{(2)}$.

\begin{lemma*}
	The map $\nabla$ naturally makes the assembly of a presheaf over $X$ into a comodule over the symmetric coalgebra $\chains(X)$.
\end{lemma*}

\begin{proof}
	The only part of the statement that is not immediate is that $\nabla_i$ is well defined for all $i \in \N$.
	Consider a presheaf $\cN$, simplices $x \to y \to z$ and an element $c \in \cN_z$, then
	\begin{align*}
		\nabla_i [(x \to z) \ot c] &=
		\sum {[(x^{(1)} \to z) \ot c]} \ot \alpha \, x^{(2)} \\ &=
		\sum {[(x^{(1)} \to y) \ot \cN_{y \to z}(c)]} \ot \alpha \, x^{(2)} \\ &=
		\nabla_i [(x \to y) \ot \cN_{y \to z}(c)]
	\end{align*}
	so $\nabla$ is well defined.
\end{proof}

A similar construction making $\assembly \cN$ into a comodule over the Alexander--Whitney coalgebra of a simply-connected $X$ is given by Andrew and M. Weiss in \cite[Proposition~5.3]{ranicki1990assembly}.
It is clear that $\nabla_0$ as defined above agrees with their coaction in this case.

\subsection{Full embedding} \label{ss:full embedding}

We now prove the main result of this work.
%It states that the factorization of the assembly functor
%\[
%\assembly \colon \Fun(X^\op, \Ch) \to \coMod^{\Sym_2}_{\chains(X)} \to \Ch
%\]
%is by a full and faithful functor followed by a forgetful one.

\begin{theorem*}
	The assembly functor from presheaves over $X$ to comodules over the symmetric coalgebra $\chains(X)$ is full and faithful.
\end{theorem*}

\begin{proof}
	\input{sec/proof}
\end{proof}